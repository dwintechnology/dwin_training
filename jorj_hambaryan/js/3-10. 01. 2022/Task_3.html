<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TASK_3</title>
</head>

<body>
    <script>
        let cardobj = {
            nums: prompt('Card numbers'),
            name: prompt('Your name'),
            surName: prompt('Your Surname'),
            cvv:  prompt('Your CVV coud'),
            expirationDate: prompt('Expiration Date'),
        }


        let cardStatus = {
            numbers: cardobj.nums,
            name: cardobj.name,
            surName: cardobj.surName,
            CVV: cardobj.cvv,
            expirationDate: cardobj.expirationDate,
            valid: true,
            balans: 0,
        };




        function creditCardValidation(nums) {
            nums = nums.nums.replaceAll('-','');
            cardobj.nums = cardobj.nums.replaceAll('-','');
            for (let key of nums) {
                let numKey = Number(key);
                if (numKey !== numKey) {
                    cardStatus.error = 'The card does not contain only numbers.';
                    cardStatus.valid = false;
                    return cardStatus

                }
                if (nums.indexOf(key) >= 0) {
                    let rets = nums.replaceAll(key, '');

                    if (rets.length < 2) {
                        cardStatus.error = 'You must have at least two different digits represented.';
                        cardStatus.valid = false;
                        return cardStatus
                    }
                }
            }
            function checkingLenghtCard() {
                if (nums.length !== 16) {
                    cardStatus.error = 'YThe card must contain at least 16 digits.';
                    cardStatus.valid = false;
                    return cardStatus
                }
            }
            checkingLenghtCard()

            function checkingTheLastCardForAnEvenNumber() {
                let lastDigit = nums[(nums.length - 1)]
                if (lastDigit % 2 !== 0) {
                    cardStatus.error = 'The final digit must be even.';
                    cardStatus.valid = false;
                    return cardStatus
                }
            }
            checkingTheLastCardForAnEvenNumber();
            return cardStatus
        }


        creditCardValidation(cardobj);

        function addBalance(sum){
            cardStatus.balans = cardStatus.balans + sum
        }

    </script>
</body>

</html>